(this.webpackJsonpcovid19italia=this.webpackJsonpcovid19italia||[]).push([[0],{108:function(e,t,a){var n=a(13),i=a(70),r=a(57),o=a(161),l=a(162);Object.defineProperty(t,"__esModule",{value:!0});var s=a(163),c=a(117),u=function(){"use strict";function e(t,a,n,i){o(this,e),this.initializing=!1,this.initialized=!1,this.list=t,this.url=a,this.filter=n,this.postDownload=i}return l(e,[{key:"init",value:function(){var e=r(n.mark((function e(){var t,a,r,o,l,u;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.list,a=this.url,this.filter,!this.initialized){e.next=5;break}return e.abrupt("return");case 5:if(!this.initializing){e.next=10;break}return e.next=8,c.delay(1);case 8:e.next=5;break;case 10:if(this.initializing=!0,!this.initialized){e.next=13;break}return e.abrupt("return");case 13:return e.next=15,s.default.get(a);case 15:r=e.sent,o=i(r.data);try{for(o.s();!(l=o.n()).done;)u=l.value,this.filter(u)&&t.push(u)}catch(n){o.e(n)}finally{o.f()}return e.next=20,this.postDownload();case 20:this.initialized=!0,this.initializing=!1;case 22:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();t.DownloadData=u},117:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.delay=function(e){return new Promise((function(t){return setTimeout(t,e)}))},t.max2Any=function(e,t){for(var a=-1/0,n=-1,i=0;i<e.length;i++){var r=t(e[i]);r>a&&(a=r,n=i)}return{max:a,i:n,element:e[n]}}},119:function(e,t,a){var n=a(13),i=a(57);Object.defineProperty(t,"__esModule",{value:!0});var r=a(108),o=a(72);t.Regions=[];var l=new r.DownloadData(t.Regions,"https://raw.githubusercontent.com/numericnews/numericnews.github.io/master/covid-web/dist/dpc-covid19-ita-regioni.json",(function(e){return!0}),i(n.mark((function e(){return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.Regions.sort((function(e,t){return o(e.data).diff(o(t.data),"seconds")}));case 1:case"end":return e.stop()}}),e)}))));function s(){return(s=i(n.mark((function e(){return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.init();case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}t.init=function(){return s.apply(this,arguments)}},129:function(e,t,a){var n=a(13),i=a(69),r=a(70),o=a(57);Object.defineProperty(t,"__esModule",{value:!0});var l=a(35),s=a(119),c=a(40),u=a(120),d=a(87);a(72);function p(){return(p=o(n.mark((function e(t,a,o){var p,h,m,v,f,g,b,w,y,x,E,k,z,C,P,D,j,O,L,T,M,S,R,_,F;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.init();case 2:return e.next=4,s.init();case 4:p=[],h=c.getRegions().length,m=a.find((function(e){return"italia"==e.toLowerCase()})),"denominazione_provincia"==t&&(a=l.provincesToRegions(a),m&&a.push(m)),v=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"].concat(a.length>10?u({count:a.length-10,seed:1}):[]),f={},g=[{label:"Data",id:"data",type:"date"}],b=r(a);try{for(b.s();!(w=b.n()).done;)y=w.value,x=d.upperFirst(y),g.push({label:x,id:x,type:"number"}),g.push({label:"percentuale "+x,id:"percentuale "+x,type:"number"})}catch(o){b.e(o)}finally{b.f()}p.push(g),E=new Map,k=[],z=[],[],C=[],P=0,D=0,j=r(a),e.prev=22,L=n.mark((function e(){var t,a,r,o,l,u,p,b,w,y,x;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=O.value,a=d.upperFirst(t),t=t.toLowerCase(),e.next=5,c.plotVelocity(s.Regions,(function(e){return c.filter("denominazione_regione",t,e)}),a,"scatter",(function(e){return d.isNumber(e.casi_testati)?(E.get(e.denominazione_regione)||E.set(e.denominazione_regione,new Date(e.data).getTime()),e.casi_testati):null}));case 5:return r=e.sent,e.next=8,c.plotVelocity(s.Regions,(function(e){return c.filter("denominazione_regione",t,e)}),a,"scatter",(function(e){return e.tamponi}));case 8:return o=e.sent,l=r.x.findIndex((function(e,t){return t>0&&r.y[t]})),r.y=o.y.slice(0,l).concat(r.y.slice(l)),r.y[l]=null,z.push(r),f[g[P+1].label]={color:v[D]},P++,e.next=17,c.plot(s.Regions,(function(e){return c.filter("denominazione_regione",t,e)}),"nuovi casi "+a,"scatter",(function(e){return e.nuovi_positivi}));case 17:u=e.sent,p={x:r.x.slice(),y:u.y.slice().map((function(e,t){return e/r.y[t]*100}))},m&&"italia"==t.toLowerCase()&&(b=E.size==h&&Math.max.apply(Math,i(E.values())),w=Math.min.apply(Math,i(E.values())),y=p.x.findIndex((function(e,t){return t>0&&new Date(e).getTime()==w})),x=p.x.findIndex((function(e,t){return t>0&&new Date(e).getTime()==b})),p.y=p.y.slice(0,y).concat(d.range(y,x).map((function(e){return null}))).concat(p.y.slice(x))),C.push(p),f[g[P+1].label]={color:v[D],strokePattern:[2,2,2,2]},P++,D++;case 24:case"end":return e.stop()}}),e)})),j.s();case 25:if((O=j.n()).done){e.next=29;break}return e.delegateYield(L(),"t0",27);case 27:e.next=25;break;case 29:e.next=34;break;case 31:e.prev=31,e.t1=e.catch(22),j.e(e.t1);case 34:return e.prev=34,j.f(),e.finish(34);case 37:T=null,M=0;case 39:if(!(M<a.length)){e.next=50;break}if(T){e.next=44;break}T=z[M].x,e.next=47;break;case 44:if(d.isEqual(T,z[M].x)&&d.isEqual(T,C[M].x)){e.next=46;break}throw new Error("Inconsistent X axes "+JSON.stringify([g[M-1],g[M]]));case 46:T=z[M].x;case 47:M++,e.next=39;break;case 50:for(S=0;S<z[0].x.length;S++){for(R=z[0].x[S],_=[new Date(R)],F=0;F<a.length;F++)_.push(z[F].y[S]),_.push(C[F].y[S]);k.push(_)}return e.abrupt("return",{options:f,data:[g].concat(k),firstCasiTestatiMap:E});case 52:case"end":return e.stop()}}),e,null,[[22,31,34,37]])})))).apply(this,arguments)}t.testsPlot=function(e,t,a){return p.apply(this,arguments)};a(59)},131:function(e,t,a){"use strict";(function(e){var n=a(80),i=a(52),r=a(45),o=a(83),l=a(82),s=a(0),c=a.n(s),u=a(132);e.appVersion=u.version;var d=function(t){Object(o.a)(s,t);var a=Object(l.a)(s);function s(e){var t;return Object(i.a)(this,s),(t=a.call(this,e)).state={loading:!0,isLatestVersion:!1,refreshCacheAndReload:function(){console.log("Clearing cache and hard reloading...");var e=window.caches;e&&e.keys().then((function(t){var a,i=Object(n.a)(t);try{for(i.s();!(a=i.n()).done;){var r=a.value;e.delete(r)}}catch(o){i.e(o)}finally{i.f()}})),window.location.reload(!0)}},t}return Object(r.a)(s,[{key:"componentDidMount",value:function(){var t=this;fetch("/meta.json").then((function(e){return e.json()})).then((function(a){var n=a.version;(function(e,t){for(var a=e.split(/\./g),n=t.split(/\./g);a.length||n.length;){var i=Number(a.shift()),r=Number(n.shift());if(i!==r)return i>r||isNaN(r)}return!1})(n,e.appVersion)?(console.log("We have a new version - ".concat(n,". Should force refresh")),t.setState({loading:!1,isLatestVersion:!1})):(console.log("You already have the latest version - ".concat(n,". No cache refresh needed.")),t.setState({loading:!1,isLatestVersion:!0}))}))}},{key:"render",value:function(){var e=this.state,t=e.loading,a=e.isLatestVersion,n=e.refreshCacheAndReload;return this.props.children({loading:t,isLatestVersion:a,refreshCacheAndReload:n})}}]),s}(c.a.Component);t.a=d}).call(this,a(68))},132:function(e){e.exports=JSON.parse('{"homepage":"https://numericnews.github.io","name":"covid19italia","version":"0.1.18","private":true,"dependencies":{"@material-ui/core":"^4.9.9","@material-ui/icons":"^4.9.1","@material-ui/lab":"^4.0.0-alpha.48","@testing-library/jest-dom":"^4.2.4","@testing-library/react":"^9.3.2","@testing-library/user-event":"^7.1.2","covid-web":"/home/alpt/personal/output/software/covid-web","dygraphs":"https://github.com/Alpt/dygraphs.git#v0.0.6","google-charts":"^2.0.0","moment":"^2.30.1","react":"^16.13.1","react-dom":"^16.13.1","react-scripts":"3.4.1","react-swipeable-views":"^0.13.9"},"scripts":{"start":"react-scripts start","build":"react-scripts build","test":"react-scripts test","eject":"react-scripts eject","generate-build-version":"node generate-build-version","prebuild":"npm run generate-build-version"},"eslintConfig":{"extends":"react-app"},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]},"devDependencies":{"serve":"^11.3.0"}}')},146:function(e,t,a){e.exports=a(185)},151:function(e,t,a){},152:function(e,t,a){},185:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(12),o=a.n(r),l=(a(151),a(152),a(13)),s=a.n(l),c=a(27),u=a(28),d=a(88),p=a(240),h=a(238),m=a(237),v=a(247),f=a(130),g=a.n(f),b=a(235),w=a(231),y=a(17),x=a(248),E=a(239),k=a(245),z=a(241),C=a(243),P=a(121),D=a.n(P),j=a(125),O=a.n(j),L=i.a.createElement(D.a,{fontSize:"small"}),T=i.a.createElement(O.a,{fontSize:"small"}),M=Object(w.a)((function(e){return{input:{"&::placeholder":{color:"#FFF"}}}}));function S(e){var t=M();return i.a.createElement(C.a,{multiple:!0,size:"small",disablePortal:!0,options:e.lists,disableCloseOnSelect:!0,getOptionLabel:function(e){return e},value:e.values,onChange:function(t,a){e.setvalue(a,e.type)},style:{background:"#FFF",padding:20},renderOption:function(e,t){var a=t.selected;return i.a.createElement(i.a.Fragment,null,i.a.createElement(k.a,{icon:L,checkedIcon:T,style:{marginRight:8},checked:a}),e)},renderInput:function(a){return i.a.createElement(z.a,Object.assign({InputProps:{classes:{input:t.input}},style:{color:"#FFF"}},a,{variant:"outlined",label:"",placeholder:e.type}))},id:e.id+Math.random()})}var R=a(35),_=a(133),F=a(80),I=a(52),N=a(45),V=a(83),G=a(82),W=a(134),q=a(41),B=a(42),A=a(40),H=a(129),Y=a(30),J=a(242),U=a(244),Q=a(236),X=a(59),K=a(56),Z=a(2),$={},ee=i.a.createElement(b.a,{component:"p"},"Dettagli sui calcoli: il growth rate in data t e' stimato usando la formula: ",i.a.createElement("br",null)," r(t) = (I(t)-I(t-1)) / (I(t-1)-I(t-2)) = v(t) / v(t-1)",i.a.createElement("br",null),"dove I(t) e' il numero totale dei casi al tempo t, v(t) e' la velocita' al tempo t. Per una motivazione dell'uso di tale formula, vedi ",i.a.createElement("a",{href:"http://katolaz.net/covid-2019/growth.html"},"Epidemic 101"),i.a.createElement("br",null),"Da tale stima, la formula per il calcolo del numero di casi al tempo t e': ",i.a.createElement("img",{src:"/eq_growth.svg",style:{height:"50%",width:"auto"},alt:"I(t)=r**t*I(0)"}),", dove I(0) e' il numero di infetti iniziali.",i.a.createElement("br",null),"Nota: questa formula e' una forte semplificazione del reale fenomeno dell'epidemia corona virus, ma essendo l'epidemia di carattere esponenziale, rende comunque una idea di come l'epidemia potrebbe evolvere senza misure di contenimento, di lock-down e vaccinazione.",i.a.createElement("br",null),"Gli scienziati stanno ancora studiando le dinamiche dell'epidemia Coronavirus. Tuttavia, un growth rate maggiore di uno implica un altissimo valore di crescita. Per approfondire sull'exponential growth rate vedi"," ",i.a.createElement("a",{href:"http://katolaz.net/covid-2019/growth.html"},"Epidemic 101"),","," ",i.a.createElement("a",{href:"https://www.youtube.com/watch?v=Kas0tIxDvrg&t=81s"},"3Blue1Brown Youtube"),","," ",i.a.createElement("a",{href:"https://en.wikipedia.org/wiki/Basic_reproduction_number"},"R0 (wikipedia)"),","," ",i.a.createElement("a",{href:"https://www.ncbi.nlm.nih.gov/pubmed/32007643"},"Zhao, Lin, et al.")," ",'("The early outbreak data largely follows the exponential growth. [We estimated a] mean R0 from 2.24 to 3.58").',i.a.createElement("br",null),"Ci sono formule e modelli molto piu' rifiniti, precisi e validi, che tengono conto delle diverse possibili fasi ed evoluzioni della malattia nel singolo individuo, tuttavia la dinamica di base dell'exponential growth e' la stessa.");function te(e){var t=e.children,a=e.value,n=e.index,r=Object(W.a)(e,["children","value","index"]);return i.a.createElement(b.a,Object.assign({component:"div",role:"tabpanel",hidden:!a||a!==n,id:"simple-tabpanel-".concat(n),"aria-labelledby":"simple-tab-".concat(n)},r,{style:{height:"100%"}}),a===n&&i.a.createElement(J.a,{style:{height:"50%"},p:3},t))}function ae(e,t){var a=t.findIndex((function(t,a){return a>0&&t[0].getTime()>=e.getTime()}));return a>=0?[t[0]].concat(t.slice(a)):t}var ne=function(e){Object(V.a)(a,e);var t=Object(G.a)(a);function a(e){var n;return Object(I.a)(this,a),(n=t.call(this,e)).state={date:(new Date).toLocaleString(),projPlotStart:null,activeStep:0,value:1,open:!1,startDate:K().subtract(1,"month").toDate()},n}return Object(N.a)(a,[{key:"getSelectedItems",value:function(){return"Nazione"==this.props.types?["Italia"]:"denominazione_regione"===this.props.field?this.props.regionValues:this.props.provinceValues}},{key:"componentWillMount",value:function(){var e=this;q.a.load((function(){e._draw(e.props.field,e.getSelectedItems())}))}},{key:"onOrientationChange",value:function(e){var t=this;window.addEventListener("resize",(function e(){t.setState({innerWidth:window.innerWidth}),window.removeEventListener("resize",e)}))}},{key:"componentDidMount",value:function(){var e=this.onOrientationChange.bind(this);window.addEventListener("orientationchange",e),this.setState({onOrientationChange:e})}},{key:"componentWillUnmount",value:function(){this.state.onOrientationChange&&window.removeEventListener("orientationchange",this.state.onOrientationChange)}},{key:"componentDidUpdate",value:function(e,t){if(t.startDate==this.state.startDate&&e.types===this.props.types&&e.field===this.props.field&&Y.isEqual(e.regionValues,this.props.regionValues)&&Y.isEqual(e.provinceValues,this.props.provinceValues)){if(t.innerWidth!=this.state.innerWidth)for(var a=0,n=Object.keys($);a<n.length;a++){var i=n[a],r=$[i];Y.isObject(r)&&"resize"in r&&Y.isFunction(r.resize)&&r.resize()}}else{var o=this.getSelectedItems();if(!o.length)return;this._draw(this.props.field,o)}}},{key:"darkenColor",value:function(e){var t=B.a.toRGB_(e);return t.r=Math.floor((255+t.r)/2),t.g=Math.floor((255+t.g)/2),t.b=Math.floor((255+t.b)/2),"rgb("+t.r+","+t.g+","+t.b+")"}},{key:"barChartPlotter",value:function(e){var t=e.drawingContext,a=e.points,n=e.dygraph.toDomYCoord(0);t.fillStyle=this.darkenColor(e.color);for(var i=1/0,r=1;r<a.length;r++){var o=a[r].canvasx-a[r-1].canvasx;o<i&&(i=o)}for(var l=Math.floor(2/3*i),s=0;s<a.length;s++){var c=a[s],u=c.canvasx;t.fillRect(u-l/2,c.canvasy,l,n-c.canvasy),t.strokeRect(u-l/2,c.canvasy,l,n-c.canvasy)}}},{key:"legendFormatter",value:function(e){var t=e.dygraph,a=t?t.getLabels():[];if(null===e.x)return e.series.map((function(e){return"<div>"+e.dashHTML+"</div><div>"+e.labelHTML+"</div>"}));var n=new Date;n.setSeconds(0),n.setMilliseconds(0);var i="<div>"+this.getLabels()[0]+": "+(e.xHTML||Object(Z.q)(n))+"</div>";return e.series.forEach((function(e,n){if(e.isVisible){var r=e.labelHTML+(e.yHTML?": "+e.yHTML+"&nbsp;":": ------");e.isHighlighted&&(r="<b>"+r+"</b>");var o=n>0&&t?t.getOption("strokePattern",a[n+1]):[],l=(!o||o.length<=1?"solid ":"dashed ")+(e.color||"white")+" 3px";i+='<div style="border-bottom: '.concat(l,'">')+r+"</div>"}})),i}},{key:"drawGrowthRate",value:function(){var e=Object(c.a)(s.a.mark((function e(t,a){var n,i,r,o,l,c,u=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!(u.length>2&&void 0!==u[2])||u[2],e.next=3,Object(R.init)();case 3:return e.next=5,Object(A.generalPlotGrowthRate)(t,a);case 5:(i=e.sent).data=ae(this.state.startDate,i.data),$.drawGrowthRatePlot=i,r=Object(X.smallYBounds)(i.data.slice(1),5),o=i.data[i.data.length-1][0],l=i.data[0].map((function(e,t){return[e.label].concat([i.data[i.data.length-1][t]])})).slice(1,i.data[0].length-1),this.setState({lastGrowthRates:{data:l,date:o}}),i.gviz=q.a.api.visualization.arrayToDataTable(i.data),c={legendFormatter:this.legendFormatter,strokeWidth:3,legend:"always",labelsDiv:"growthRateLegendDiv",colorValue:1,digitsAfterDecimal:4,series:i.options,valueRange:r},n&&($.drawGrowthRateGraph=new B.a(document.getElementById("growthRatePlotDiv"),i.gviz,c),$.drawGrowthRateGraph.resize());case 15:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"annotationOnHighlight",value:function(e,t,a,n,i,r){var o,l=[],s=Object(F.a)(n);try{for(s.s();!(o=s.n()).done;){var c=o.value,u=""+c.yval,d=K(a).format("DD MMM"),p=Math.max(u.length,d.length),h="".concat(u,"<br>").concat(d),m=p/1.5;l.push({series:c.name,xval:a,width:18*m,height:46,tickHeight:4,html:h})}}catch(v){s.e(v)}finally{s.f()}e.setAnnotations(l)}},{key:"annotationOnPointClick",value:function(e,t,a){return this.annotationOnHighlight(e,t,a.xval,[a])}},{key:"drawChart",value:function(){var e=Object(c.a)(s.a.mark((function e(t,a){var n,i,r,o,l,c,u,d,p=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=function(e){return e.map((function(e,t){return e.filter((function(e,t){return 0==t||t%2==1}))}))},i=function(e){return e.map((function(e,t){return e.filter((function(e,t){return t%2==0}))}))},n=!(p.length>2&&void 0!==p[2])||p[2],e.next=5,Object(R.init)();case 5:return e.next=7,Object(A.generalPlot)(t,a);case 7:(o=e.sent).data=ae(this.state.startDate,o.data),$.drawChartPlot=o,(l=Object.assign({},o)).data=r(o.data),l.gviz=q.a.api.visualization.arrayToDataTable(l.data),c={legendFormatter:this.legendFormatter,strokeWidth:3,legend:"always",labelsDiv:"totaleLegendDiv",colorValue:1,series:Object.assign({},l.options)},(u=Object.assign({},o)).data=i(o.data),u.gviz=q.a.api.visualization.arrayToDataTable(u.data),d={legendFormatter:this.legendFormatter,strokeWidth:3,legend:"always",labelsDiv:"velLegendDiv",colorValue:1,series:Object.assign({},u.options)},n&&($.drawChartGraphVel&&$.drawChartGraphVel.destroy(),$.drawChartGraphVel=new B.a(document.getElementById("velPlotDiv"),u.gviz,d),$.drawChartGraphVel.ready((function(){$.drawChartGraphVel.resize()})),$.drawChartGraphTotale&&$.drawChartGraphTotale.destroy(),$.drawChartGraphTotale=new B.a(document.getElementById("totalePlotDiv"),l.gviz,c),$.drawChartGraphTotale.ready((function(){$.drawChartGraphTotale.resize()})));case 19:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"calculateProjectionChart",value:function(){var e=Object(c.a)(s.a.mark((function e(t,a){var n,i,r=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>2&&void 0!==r[2]?r[2]:null,e.next=3,Object(R.init)();case 3:return e.next=5,Object(A.projectGeneralPlot)(t,a,n);case 5:return i=e.sent,this.setState({projPlotStart:{gr:i.gr,date:i.startDate,series:i.series}}),i.gviz=q.a.api.visualization.arrayToDataTable(i.data),e.abrupt("return",{plot:i,safeMax:i.safeMax});case 9:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"drawProjectionChart",value:function(){var e=Object(c.a)(s.a.mark((function e(t,a){var n,i,r,o,l,u,d=this,p=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=p.length>2&&void 0!==p[2]?p[2]:null,e.next=3,this.calculateProjectionChart(t,a,n);case 3:i=e.sent,r=i.plot,o=i.safeMax,$.projectionPlot=r,l={legendFormatter:this.legendFormatter,strokeWidth:3,legend:"always",labelsDiv:"projLegendDiv",colorValue:1,series:r.options,valueRange:[0,o]},$.drawProjectionChartGraph&&$.drawProjectionChartGraph.destroy(),$.drawProjectionChartGraph=new B.a(document.getElementById("projPlotDiv"),r.gviz,l),$.drawProjectionChartGraph.resize(),(u=$.drawProjectionChartGraph).ready((function(){u.updateOptions({pointClickRadius:50,pointClickCallback:function(){var e=Object(c.a)(s.a.mark((function e(n,i){var r,o,l,c,p,h;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.idx,o=$.projectionPlot.data,(l=o[r+1][0]).getTime()>$.projectionPlot.maxDate.getTime()&&(l=$.projectionPlot.maxDate),e.next=6,d.calculateProjectionChart(t,a,l);case 6:c=e.sent,p=c.plot,h=c.safeMax,u.updateOptions({file:p.gviz,valueRange:[0,h]});case 10:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()})}));case 13:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"drawTamponiChart",value:function(){var e=Object(c.a)(s.a.mark((function e(t,a){var n,i,r,o,l,c,u;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H.testsPlot)(t,a,0);case 2:for((n=e.sent).data=ae(this.state.startDate,n.data),i=Y.cloneDeep(n),this.setState({firstCasiTestati:n.firstCasiTestatiMap}),r=1;r<n.data.length;r++)for(o=1;2*o<n.data[r].length;o++)n.data[r][2*o]=null,i.data[r][2*(o-1)+1]=null;l=Object(X.smallYBounds)(i.data.slice(1),1),n.gviz=q.a.api.visualization.arrayToDataTable(n.data),i.gviz=q.a.api.visualization.arrayToDataTable(i.data),c={legendFormatter:this.legendFormatter,strokeWidth:3,legend:"always",labelsDiv:"tampTLegendDiv",colorValue:1,series:n.options},$.drawTampTChartGraph=new B.a(document.getElementById("tampTPlotDiv"),n.gviz,c),$.drawTampTChartGraph.resize(),(u=Y.clone(c)).labelsDiv="tampPLegendDiv",u.series=Y.clone(c.series),u.valueRange=[0,Math.min(100,l[1])],$.drawTampPChartGraph=new B.a(document.getElementById("tampPPlotDiv"),i.gviz,u),$.drawTampPChartGraph.resize();case 19:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"_draw",value:function(){var e=Object(c.a)(s.a.mark((function e(t,a){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.state.value,e.next=1===e.t0?3:2===e.t0?6:3===e.t0?9:4===e.t0?12:15;break;case 3:return e.next=5,this.drawChart(t,a);case 5:return e.abrupt("break",16);case 6:return e.next=8,this.drawTamponiChart(t,a);case 8:return e.abrupt("break",16);case 9:return e.next=11,this.drawGrowthRate(t,a);case 11:return e.abrupt("break",16);case 12:return e.next=14,this.drawProjectionChart(t,a);case 14:case 15:return e.abrupt("break",16);case 16:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"handleChange",value:function(e,t){var a=this;if(0!=t){var n=this.props.field,i=this.getSelectedItems();this.setState({value:t},(function(){a._draw(n,i)}))}else this.props.handleDrawerToggle()}},{key:"getLabel",value:function(){this.state.value;return"Approfondimento"}},{key:"getContent",value:function(e){var t=this,a=this.state,n=a.lastGrowthRates,r=a.value,o=a.projPlotStart,l=a.firstCasiTestati,s=a.startDate,c=K().subtract(1,"month").toDate(),u=!s||s.getTime()>0?i.a.createElement(b.a,{component:"p"},i.a.createElement("button",{onClick:function(){return t.setState({startDate:new Date(0)})}},"Clicca per vedere anche i dati prima del ",s.toLocaleString())):i.a.createElement(b.a,{component:"p"},i.a.createElement("button",{onClick:function(){return t.setState({startDate:c})}},"Clicca per vedere i dati solo a partire dal ",c.toLocaleString())),d=n,p=l&&new Date(Math.max.apply(Math,Object(_.a)(l.values()))),h=p?p.toLocaleString():"[non disponibile]",m=i.a.createElement("div",{className:"explanation"},i.a.createElement(b.a,{component:"p"},i.a.createElement("br",null),"In questi due grafi viene rappresentata la percentuale di tamponi risultati positivi e il numero totale di tamponi effettuati in un dato giorno.",i.a.createElement("br",null),"Facendo un esempio estremo, se il numero di tamponi e' basso, 10, e il numero di casi in quel giorno e' 10 (e la percentuale e' 100%), e' comunque possibile che ci siano, in realta', molti piu' casi, ad esempio, 100. Semplicemente, gli altri 90 casi non sono stati registrati perche' non sono stati fatti i tamponi. Quindi, possiamo dire che piu' il numero di tamponi e' alto e piu' la percentuale e' bassa, piu' il numero totale dei casi e i numeri derivati da esso (velocita', growth rate), mostrati negli altri grafi, sono indicativi.",i.a.createElement("br",null),u,i.a.createElement("br",null),"Dettagli: a partire da giorno ",h,', il numero dei tamponi e\' sostituito dal numero di "casi testati". Questo perche\' i tamponi vengono fatti piu\' volte ad una stessa persona. "Casi testati", invece, non conta i tamponi duplicati, quindi una persona viene conteggiata una volta sola.',i.a.createElement("br",null),"Prima di giorno ",h,", questo parametro non era disponibile. Per piu' informazioni, vedi  ",i.a.createElement("a",{href:"https://www.youtrend.it/2020/03/25/coronavirus-il-rebus-dei-tamponi-multipli/"},"Lorenzo Ruffino"),".",i.a.createElement("br",null),"Nota: non e' disponibile il numero di tamponi per provincia, ma solo per regione.",i.a.createElement("br",null),'Nota: nei primi giorni di cambio da "tamponi" a "casi testati", ci sono state delle irregolarita\' nei dati di Lombardia, Lazio e Campania. Piu\' precisamente, giorno 20 e 21 aprile, vedi ',i.a.createElement("a",{href:"https://github.com/pcm-dpc/COVID-19/blob/master/note/dpc-covid19-ita-note-it.csv"},"Note DPC"),".")),v=!e||"velPlotDiv"==e;return i.a.createElement(i.a.Fragment,null,function(){switch(r){case 1:return i.a.createElement("div",{className:"explanation"},i.a.createElement("br",null),"totalePlotDiv"==e?i.a.createElement(b.a,{component:"p"},'Totale casi: sono tutte le persone che sono state certificate essere infette da coronavirus. Questo numero e\' uguale alla somma "persone attualmente positive" + "persone guarite" + "persone decedute"'):i.a.createElement(b.a,{component:"p"},"Velocita': e' il numero dei nuovi casi. Se, ad esempio, oggi la velocita' e' 10, vuol dire ci sono stati 10 casi in piu' rispetto a ieri. Lo stesso vale per gli altri giorni: se giorno 15 Marzo la velocita' e' 7, vuol dire che rispetto al giorno precedente ci sono stati 7 casi in piu'."),i.a.createElement("br",null),u);case 2:return m;case 3:return i.a.createElement("div",{className:"explanation"},i.a.createElement(b.a,{component:"p"},"In data ",(null===d||void 0===d?void 0:d.date)?null===d||void 0===d?void 0:d.date.toLocaleString():"[non-disponibile]",", i growth rate sono:",i.a.createElement("br",null),i.a.createElement("br",null),(null===d||void 0===d?void 0:d.data)?d.data.map((function(e,t){return i.a.createElement("span",{key:t},e.map((function(e){return Y.isNumber(e)?e.toFixed(4):e})).join(" "),i.a.createElement("br",null))})):"[non disponibile]"),i.a.createElement("br",null),i.a.createElement(b.a,{component:"p"},"Growth rate: rapporto tra la velocita' di un giorno e quella del giorno precedente. E' una quantita' importante perche' e' una stima della crescita della velocita'. Se il growth rate e' maggiore di 1, allora la velocita' sta' crescendo. Se e' minore, sta' diminuendo. L'epidemia finisce solo se la velocita' scende e rimane a zero."),i.a.createElement("br",null),u,i.a.createElement("br",null),i.a.createElement(b.a,{component:"p"},"La crescita del numero di casi in un'epidemia come il Coronavirus e' esponenziale. In una crescita esponenziale anche valori poco piu' alti (growth rate > 1) implicano un'altissima crescita. Ad esempio, se ci sono 100 infetti, con growth rate 1.22, solo dopo 30 giorni ci saranno 39000 infetti."),i.a.createElement("br",null),ee);case 4:return i.a.createElement("div",{className:"explanation"},i.a.createElement(b.a,{component:"p"},"In questo grafo, viene usato il growth rate per mostrare ",i.a.createElement("b",null,"a grandi linee")," ","come procederebbe l'epidemia se non venissero fatte delle misure di contenimento e lock-down. Senza misure di prevenzione, l'andamento dei nuovi casi sarebbe esponenziale."),o?i.a.createElement(b.a,{component:"p"},"L'andamento ipotetico graficato (linee tratteggiate) e' a partire da giorno ",o.date.toLocaleString(),", dove i growth rate erano ",o.gr.map((function(e){return e.toFixed(3)})).join(", ")," in ",o.series.join(", "),".",i.a.createElement("br",null),"Puoi cliccare su un punto del grafo per cambiare il giorno dell'inizio della proiezione. La proiezione verra' ricalcolata a partire da quel punto, usando il growth rate di quel giorno.",i.a.createElement("br",null),"Nota: la proiezione inizia giorno ",o.date.toLocaleString(),". Il numero di infetti iniziale ",i.a.createElement("i",null,"I(0)"),' in quel giorno e\' scelto come il numero di "totale positivi", ovvero il numero di persone infette vive e non ancora guarite. Nel grafo si puo\' notare un balzo in basso, infatti, "totale positivi" ',"<=",' "totale casi".                         ',i.a.createElement("br",null),"Infine, se il growth rate e' minore di 1, la proiezione non ha piu' senso e verra' graficata una linea costante."):"",ee);default:return i.a.createElement("div",null)}}(),v?i.a.createElement("div",{style:{"font-size":"smaller"}},i.a.createElement("br",null),"I dati sono forniti dalla ",i.a.createElement("a",{href:"https://github.com/pcm-dpc/COVID-19"},"Protezione Civile"),". Il codice sorgente dei plot e' disponibile su ",i.a.createElement("a",{href:"https://github.com/numericnews/numericnews.github.io/tree/master/covid-web"},"github"),".",i.a.createElement("br",null),i.a.createElement("a",{href:"https://www.linkedin.com/in/lopumo/"},"Andrea Lo Pumo"),", ",i.a.createElement("a",{href:"https://www.linkedin.com/in/claudiomusumeci/"},"Claudio F. Musumeci"),".  ",i.a.createElement("a",{href:"mailto:numeric-news-authors@googlegroups.com"},"Contattaci"),"."):i.a.createElement(i.a.Fragment,null))}},{key:"handleClose",value:function(){this.setState({open:!1})}},{key:"render",value:function(){var e,t,a,n,r=window.innerWidth>window.innerHeight?window.innerWidth-.2*window.innerWidth+"px":window.innerWidth-.1*window.innerWidth+"px",o=this.state.value,l="Regione"==this.props.types?"regioni":"province",s=i.a.createElement("div",{style:{left:"60px",top:"10px",position:"absolute","font-size":"small"}},"Due dita per zoomare. Doppio click per resettare."),c=function(){return document.getElementById("tabBar")};return i.a.createElement(i.a.Fragment,null,i.a.createElement(U.a,{id:"tabBar",onChange:this.handleChange.bind(this),"aria-label":"ploty tabs",variant:"fullWidth",scrollButtons:"auto",className:"generalTabs",value:this.state.value},i.a.createElement(Q.a,{label:"Altre "+l}),i.a.createElement(Q.a,{label:"Totale casi"}),i.a.createElement(Q.a,{label:"Tamponi"}),i.a.createElement(Q.a,{label:"Growth Rate"}),i.a.createElement(Q.a,{label:"Exp Growth Rate"})),i.a.createElement(te,{label:"Altre "+l,value:o,index:0},"empty"),i.a.createElement(te,{label:"Totale casi",value:o,index:1},i.a.createElement("div",{id:"totaleCasi",style:{height:"100%",top:null===(e=c())||void 0===e?void 0:e.clientHeight,position:"relative"}},i.a.createElement(m.a,{container:!0,style:{height:75*window.innerHeight/100+"px"}},i.a.createElement(m.a,{item:!0,xs:12,md:12,className:"containerLegend"},i.a.createElement("div",{id:"totaleLegendDiv"})),i.a.createElement(m.a,{item:!0,xs:12,md:12,style:{position:"relative",width:"90%",height:"100%",maxWidth:r}},s,i.a.createElement("div",{id:"totalePlotDiv",style:{width:"100%",height:"100%"}})),i.a.createElement(m.a,{item:!0,xs:12},this.getContent("totalePlotDiv")),i.a.createElement(m.a,{item:!0,xs:12,md:12,className:"containerLegend"},i.a.createElement("div",{id:"velLegendDiv"})),i.a.createElement(m.a,{item:!0,xs:12,md:12,style:{position:"relative",width:"90%",height:"100%",maxWidth:r}},s,i.a.createElement("div",{id:"velPlotDiv",style:{width:"100%",height:"100%"}})),i.a.createElement(m.a,{item:!0,xs:12},this.getContent("velPlotDiv"))))),i.a.createElement(te,{label:"Tamponi",value:o,index:2},i.a.createElement("div",{style:{top:null===(t=c())||void 0===t?void 0:t.clientHeight,position:"relative"}},i.a.createElement(m.a,{container:!0,style:{height:75*window.innerHeight/100+"px"}},i.a.createElement(m.a,{item:!0,xs:12,md:12,className:"containerLegend"},i.a.createElement("div",{id:"tampPLegendDiv"})),i.a.createElement(m.a,{item:!0,xs:12,md:12,style:{position:"relative",width:"100%",height:"100%",maxWidth:r}},s,i.a.createElement("div",{id:"tampPPlotDiv",style:{width:"100%",height:"100%"}})),i.a.createElement(m.a,{item:!0,xs:12,md:12,style:{position:"relative",width:"100%",height:"100%",maxWidth:r}},s,i.a.createElement("div",{id:"tampTPlotDiv",style:{width:"100%",height:"100%"}})),i.a.createElement(m.a,{item:!0,xs:12,md:12,className:"containerLegend"},i.a.createElement("div",{id:"tampTLegendDiv"})),i.a.createElement(m.a,{item:!0,xs:12},this.getContent())))),i.a.createElement(te,{label:"Growth Rate",value:o,index:3},i.a.createElement("div",{style:{top:null===(a=c())||void 0===a?void 0:a.clientHeight,position:"relative"}},i.a.createElement(m.a,{container:!0,style:{height:75*window.innerHeight/100+"px"}},i.a.createElement(m.a,{item:!0,xs:12,md:12,className:"containerLegend"},i.a.createElement("div",{id:"growthRateLegendDiv"})),i.a.createElement(m.a,{item:!0,xs:12,md:12,style:{position:"relative",width:"100%",height:"100%",maxWidth:r}},s,i.a.createElement("div",{id:"growthRatePlotDiv",style:{width:"100%",height:"100%"}})),i.a.createElement(m.a,{item:!0,xs:12},this.getContent())))),i.a.createElement(te,{label:"Proiezione",value:o,index:4},i.a.createElement("div",{style:{top:null===(n=c())||void 0===n?void 0:n.clientHeight,position:"relative"}},i.a.createElement(m.a,{container:!0,style:{height:75*window.innerHeight/100+"px"}},i.a.createElement(m.a,{item:!0,xs:12,md:12,className:"containerLegend"},i.a.createElement("div",{id:"projLegendDiv"})),i.a.createElement(m.a,{item:!0,xs:12,md:12,style:{position:"relative",width:"100%",height:"100%",maxWidth:r}},s,i.a.createElement("div",{id:"projPlotDiv",style:{width:"100%",height:"100%"}})),i.a.createElement(m.a,{item:!0,xs:12},this.getContent())))))}}]),a}(n.Component),ie=Object(w.a)((function(e){return{root:{},drawer:Object(d.a)({},e.breakpoints.up("sm"),{width:300,flexShrink:0}),menuButton:Object(d.a)({border:"solid 1px #FFF",borderRadius:"15px",fontSize:"10px",padding:"3px"},"fontSize","1rem"),drawerPaper:{background:"#2c2e35",color:"#FFF",textAlign:"center"},content:{}}}));function re(e){var t=e.container,a=ie(),n=Object(y.a)(),r=i.a.useState(!1),o=Object(u.a)(r,2),l=o[0],d=o[1],f=function(){d(!l)},w=i.a.useState("Provincia"),k=Object(u.a)(w,2),z=k[0],C=k[1],P=i.a.useState([]),D=Object(u.a)(P,2),j=D[0],O=D[1],L=i.a.useState([]),T=Object(u.a)(L,2),M=T[0],_=T[1],F=i.a.useState(["Lombardia","Veneto"]),I=Object(u.a)(F,2),N=I[0],V=I[1],G=i.a.useState(["Bergamo","Milano","Venezia"]),W=Object(u.a)(G,2),q=W[0],B=W[1];i.a.useEffect((function(){(function(){var e=Object(c.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(R.init)();case 2:O(Object(A.getProvinces)().sort()),_(Object(A.getRegions)().sort());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var H=i.a.createElement("div",null,i.a.createElement("div",{className:a.toolbar},i.a.createElement(m.a,{container:!0,style:{position:"relative",top:"15px"}},i.a.createElement(m.a,{item:!0,xs:6},i.a.createElement(b.a,{variant:"h6",noWrap:!0,style:{paddingLeft:10,paddingBottom:20}},"Filtra")),i.a.createElement(m.a,{item:!0,xs:6},i.a.createElement(g.a,{style:{float:"right",cursor:"pointer"},onClick:f})))),i.a.createElement(h.a,null),i.a.createElement(x.a,{exclusive:!0,value:z,onChange:function(e,t){C(t)},"aria-label":"aree_buttons"},i.a.createElement(E.a,{value:"Nazione","aria-label":"bold"},"Nazione"),i.a.createElement(E.a,{value:"Regione","aria-label":"bold"},"Regioni"),i.a.createElement(E.a,{value:"Province","aria-label":"bold"},"Province")),i.a.createElement(h.a,null),i.a.createElement("div",{style:{display:"Regione"===z?"block":"none"}},i.a.createElement(S,{id:"regione",values:N,setvalue:function(e){V(e)},type:"Regioni",lists:M})),i.a.createElement("div",{style:{display:"Province"===z?"block":"none"}},i.a.createElement(S,{id:"province",values:q,setvalue:function(e){B(e)},type:"Province",lists:j})),i.a.createElement("div",{style:{display:"Nazione"===z?"block":"none"}},i.a.createElement(S,{id:"nazione",values:["Italia"],type:"Nazione",lists:["Italia"]})));return i.a.createElement("div",{className:a.root},i.a.createElement(p.a,null),i.a.createElement("nav",{className:a.drawer,"aria-label":"mailbox folders"},i.a.createElement(v.a,{container:t,variant:"temporary",anchor:"rtl"===n.direction?"right":"left",open:l,onClose:f,classes:{paper:a.drawerPaper},ModalProps:{keepMounted:!0}},H)),i.a.createElement("main",{className:a.content},i.a.createElement("div",{className:a.toolbar}),l?i.a.createElement(i.a.Fragment,null):i.a.createElement(ne,{handleDrawerToggle:f,types:z,field:"Regione"===z?"denominazione_regione":"denominazione_provincia",regionValues:N,provinceValues:q})))}var oe=a(131);var le=function(){return i.a.createElement(oe.a,null,(function(e){var t=e.loading,a=e.isLatestVersion,n=e.refreshCacheAndReload;return t?null:(t||a||n(),setTimeout(n,K.duration(5,"hour").asMilliseconds()),i.a.createElement("div",{id:"App"},i.a.createElement(m.a,{container:!0},i.a.createElement(m.a,{item:!0,xs:12},i.a.createElement(re,null)))))}))},se=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ce(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}o.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(le,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");se?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):ce(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):ce(t,e)}))}}()},35:function(e,t,a){var n=a(69),i=a(13),r=a(57);Object.defineProperty(t,"__esModule",{value:!0});var o=a(108),l=a(117),s=a(72);t.Provinces=[];var c=new o.DownloadData(t.Provinces,"https://raw.githubusercontent.com/numericnews/numericnews.github.io/master/covid-web/dist/dpc-covid19-ita-province.json",(function(e){return!0}),r(i.mark((function e(){return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.Provinces.sort((function(e,t){return s(e.data).diff(s(t.data),"seconds")}));case 1:case"end":return e.stop()}}),e)}))));function u(){return(u=r(i.mark((function e(){return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.init();case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}t.init=function(){return u.apply(this,arguments)},t.provincesToRegions=function(e){return n(new Set(e.map((function(e){var a=t.Provinces.find((function(t){return t.denominazione_provincia.toLowerCase()==e.toLowerCase()&&t.denominazione_regione}));return a?a.denominazione_regione.toLowerCase():null})).filter((function(e){return e}))))},t.regionsToProvinces=function(e){return e.map((function(e){var a=l.max2Any(t.Provinces.filter((function(t){return t.denominazione_regione.toLowerCase()==e.toLowerCase()&&t.denominazione_provincia})),(function(e){return e.totale_casi}));return a.i>=0?a.element.denominazione_provincia:null})).filter((function(e){return e}))}},40:function(e,t,a){var n=a(13),i=a(69),r=a(180),o=a(70),l=a(57);Object.defineProperty(t,"__esModule",{value:!0});var s=a(87),c=a(35),u=a(119),d=a(72),p=a(120),h=a(59);t.Provinces=c.Provinces;function m(e,t,a){return"italia"==t.toLowerCase()||a[e].toLowerCase()==t}function v(e,t){return f.apply(this,arguments)}function f(){return(f=l(n.mark((function e(a,i){var r,l,c,u,d,h,v,f,g,b,w,x,k,z,C,P,D,j,O,L,T,M,S,R,_=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=_.length>2&&void 0!==_[2]?_[2]:null,l=_.length>3&&void 0!==_[3]?_[3]:null,null==r&&(r=t.Provinces),c=[],u=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"].concat(i.length>10?p({count:i.length-10,seed:1}):[]),d={},h=[{label:"Data",id:"data",type:"date"}],v=o(i);try{for(v.s();!(f=v.n()).done;)g=f.value,b=s.upperFirst(g),h.push({label:b,id:b,type:"number"}),h.push({label:"velocita' "+b,id:"vel::"+b,type:"number"})}catch(n){v.e(n)}finally{v.f()}c.push(h),w=[],x=[],k=[],z=0,C=0,P=o(i);try{for(j=function(){var e=D.value,t=s.upperFirst(e);e=e.toLowerCase();var n=y(r,(function(t){return m(a,e,t)}),t,"scatter",l);x.push(n),d[h[z+1].label]={color:u[C]},z++;var i=E(r,(function(t){return m(a,e,t)}),"velocita' "+t,"scatter",l);k.push(i),d[h[z+1].label]={color:u[C],strokePattern:[10,2,5,2]},z++,C++},P.s();!(D=P.n()).done;)j()}catch(n){P.e(n)}finally{P.f()}O=null,L=0;case 19:if(!(L<i.length)){e.next=30;break}if(O){e.next=24;break}O=x[L].x,e.next=27;break;case 24:if(s.isEqual(O,x[L].x)&&s.isEqual(O,k[L].x)){e.next=26;break}throw new Error("Inconsiste X axes "+JSON.stringify([h[L-1],h[L]]));case 26:O=x[L].x;case 27:L++,e.next=19;break;case 30:for(T=0;T<x[0].x.length;T++){for(M=x[0].x[T],S=[new Date(M)],R=0;R<i.length;R++)S.push(x[R].y[T]),S.push(k[R].y[T]);w.push(S)}return e.abrupt("return",{options:d,data:[h].concat(w)});case 32:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(){return(g=l(n.mark((function e(t,a){var r,o,l,p,m,f,g,w,y,x,E,k,z,P,D,j,O,L,T,M,S,R,_,F=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=F.length>2&&void 0!==F[2]?F[2]:null,e.next=3,c.init();case 3:return e.next=5,u.init();case 5:return o=a.find((function(e){return"italia"==e.toLowerCase()})),"denominazione_provincia"==t&&(a=c.provincesToRegions(a),o&&a.push(o)),e.next=9,v("denominazione_regione",a);case 9:return l=e.sent,e.next=12,b("denominazione_regione",a);case 12:return p=e.sent,e.next=15,v("denominazione_regione",a,u.Regions,(function(e){return e.totale_positivi}));case 15:return m=e.sent,f=l,g=a.length,w=f.data.slice(-1)[0][0],r?(x=f.data.findIndex((function(e,t){return t>0&&Math.abs(e[0].getTime()-r.getTime())<=d.duration(.5,"day").asMilliseconds()})),E=f.data[x],x<0?(r=w,y=-1):(r=E[0],y=x)):(k=function(e){for(var t=s.range(0,e[1].length-1).map((function(e){return null})),a=1;a<e[1].length;a++){for(var n=0,i=1;i<e.length;i++)s.isFinite(e[i][a])&&(t[a]+=e[i][a],n++);t[a]/=n}return h.average(t.filter(s.isFinite))},z=function(e,t){for(var a=1/0,n=-1,i=1;i<e[1].length;i++)for(var r=1;r<e.length;r++)s.isFinite(e[r][i])&&Math.abs(e[r][i]-t)<a&&(a=Math.abs(e[r][i]-t),n=r);return{i:n,y:a}},P=p.data,(D=z(P,k(P))).i>=0?(r=P[D.i][0],y=D.i):(r=w,y=-1)),j=C(2*g+1,l.data,m.data,p.data.slice(y)[0].slice(1),r,Math.max(d(w).diff(r,"days"),30)),O=f.data[0].slice(1).map((function(e){return Object.assign({},{label:"pro. "+e.label,id:"pro. "+e.label})})),L=j,T=function(e){var t=e[0].map((function(t,a){return 0==a?0:h.max2(e.map((function(e,t){return 0==t?0:e[a]})).filter(s.isFinite)).max}));return Math.max.apply(Math,i(t))},M=[f.data[0].concat(O)].concat(L),S=T(f.data),R=T(M),_=R>S?Math.min(4*S,R):S,e.abrupt("return",{options:Object.assign(s.mapValues(f.options,(function(e,t,a){return/velocit/i.test(t)&&delete e.strokePattern,e})),s.mapValues(s.mapKeys(f.options,(function(e,t,a){return"pro. "+t})),(function(e){return Object.assign({},e,{strokePattern:[10,2,5,2]})}))),data:M,startDate:r,startIdx:y,gr:p.data.slice(y)[0].slice(1,-1),safeMax:_,series:p.data[0].slice(1,-1).map((function(e){return e.label})),maxDate:f.data.slice(-1)[0][0]});case 30:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(e,t){return w.apply(this,arguments)}function w(){return(w=l(n.mark((function e(a,i){var r,l,c,u,d,h,v,f,g,b,w,y,x,E,z,C,P,D,j,O;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],l=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"].concat(i.length>10?p({count:i.length-10,seed:1}):[]),c={},u=[{label:"Data",id:"data",type:"date"}],d=o(i);try{for(d.s();!(h=d.n()).done;)v=h.value,f=s.upperFirst(v),u.push({label:f,id:f,type:"number"})}catch(n){d.e(n)}finally{d.f()}u.push({label:"y=1",id:"y=1",type:"number"}),r.push(u),g=[],b=[],w=0,y=o(i);try{for(E=function(){var e=x.value,n=s.upperFirst(e);e=e.toLowerCase();var i=k(t.Provinces,(function(t){return m(a,e,t)}),n,"scatter");b.push(i),c[u[w+1].label]={color:l[w]},w++},y.s();!(x=y.n()).done;)E()}catch(n){y.e(n)}finally{y.f()}z=null,C=0;case 15:if(!(C<i.length)){e.next=26;break}if(z){e.next=20;break}z=b[C].x,e.next=23;break;case 20:if(s.isEqual(z,b[C].x)){e.next=22;break}throw new Error("Inconsiste X axes "+JSON.stringify([u[C-1],u[C]]));case 22:z=b[C].x;case 23:C++,e.next=15;break;case 26:for(P=0;P<b[0].x.length;P++){for(D=b[0].x[P],j=[new Date(D)],O=0;O<i.length;O++)j.push(b[O].y[P]);j.push(1),g.push(j)}return e.abrupt("return",{options:c,data:[u].concat(g)});case 28:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e,t,a,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(e){return e.totale_casi};null==i&&(i=function(e){return e.totale_casi});var l,s=new Map,c=o(e);try{for(c.s();!(l=c.n()).done;){var u=l.value;if(t(u)){var d=void 0;d=s.has(u.data)?s.get(u.data):0,d+=i(u),s.set(u.data,d)}}}catch(w){c.e(w)}finally{c.f()}var p,h=[],m=[],v=o(s);try{for(v.s();!(p=v.n()).done;){var f=r(p.value,2),g=f[0],b=f[1];h.push(g),m.push(b)}}catch(w){v.e(w)}finally{v.f()}return{x:h,y:m,type:n,name:a}}function x(e){for(var t=0,a=[],n=0;n<e.x.length;n++){e.x[n];var i=e.y[n],r=i-t;t=i,a.push(r)}return e.y=a,e}function E(e,t,a,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(e){return e.totale_casi},r=y(e,t,a,n,i);return x(r)}function k(e,t,a,n){for(var i=y(e,t,a,n),r=x(i),o=[],l=0;l<r.x.length;l++){var s=l>0?r.y[l-1]:0,c=r.y[l];o.push(c/s)}return i.y=o,i}t.filter=m,t.generalPlot=v,t.projectGeneralPlot=function(e,t){return g.apply(this,arguments)},t.generalPlotGrowthRate=b,t.plot=y,t._plotVelocity=x,t.plotVelocity=E;var z=d.duration(1,"days").asMilliseconds();function C(e,t,a,n,i,r){if(t=t.slice(1).map((function(e){return e.slice()})),!(e>1&&e%2==1))throw new Error("Invalid columns number. Columns should be: Date, Prov1, Vel1, Prov2, Vel2, ... So it should be > 0 and odd");for(var o=t.findIndex((function(e){return e[0].getTime()==i.getTime()})),l=o<0?s.range(0,e).map((function(e,t){return t%2==1?0:1})):a[o].slice(),c=s.range(0,e-1).map((function(e){return null})),u=0;u<o;u++)t[u]=t[u].concat(c.slice());t[o]=t[o].concat(t[o].slice(1));for(var d=t.slice(o+1).map((function(e){return e.slice()})),p=Math.max(r,t.length-o-1),h=1;h<p+1;h++){var m=o+h;t[m]=t[m]||[],t[m][0]=new Date(i.getTime()+z*h);for(var v=1;v<e;v+=2){var f=Math.floor(v/2),g=m>o+1?t[m-1][v]:l[v];t[m][v+1]=n[f]>=1?g*(n[f]-1):null;var b=t[m][v+1];t[m][v]=g+b}}for(var w=1;w<p+1;w++){var y=o+w,x=w-1;t[y]=[t[y][0]].concat(x<d.length?d[x].slice(1):c.slice()).concat(t[y].slice(1))}return t}t.getProvinces=function(){return i(new Set(t.Provinces.map((function(e){return e.denominazione_provincia}))))},t.getRegions=function(){return i(new Set(t.Provinces.map((function(e){return e.denominazione_regione}))))}},59:function(e,t,a){var n=a(69),i=a(70);Object.defineProperty(t,"__esModule",{value:!0});var r=a(87),o=a(184);function l(e){var t,a=0,n=i(e);try{for(n.s();!(t=n.n()).done;){a+=t.value}}catch(r){n.e(r)}finally{n.f()}return a/e.length}t.stdDev=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t=r.isNumber(t)?t:l(e);var a,n=0,o=i(e);try{for(o.s();!(a=o.n()).done;){var s=a.value;n+=Math.pow(s-t,2)}}catch(c){o.e(c)}finally{o.f()}return Math.sqrt(n)},t.average=l,t.max2=function(e){for(var t=-1/0,a=-1,n=0;n<e.length;n++)e[n]>t&&(t=e[n],a=n);return{max:t,i:a}},t.smallYBounds=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=[],i=[],l=function(n){var l=e.map((function(e){return e[n]})).filter(r.isFinite);a.push(o(t,l)),i.push(o(100-t,l))},s=1;s<e[0].length;s++)l(s);return[Math.min.apply(Math,n(a.filter(r.isFinite))),Math.max.apply(Math,n(i.filter(r.isFinite)))]}}},[[146,1,2]]]);
//# sourceMappingURL=main.dbf2d7d7.chunk.js.map